# Claude アーティファクト版 議事録スライドジェネレーター 要件定義

version: 1.0
project:
  name: Artifact Slide Generator
  description: 議事録テキストから構造化されたスライドコンテンツを生成するClaudeアーティファクト。
  objective: ユーザーが入力した議事録から、指定された枚数とプロンプトに基づき、スライドの構成案（タイトル、3カラム内容、トークスクリプト、画像生成プロンプト）をJSON形式で生成し、アーティファクト内に表示する。

# --- 主要機能 ---
features:
  - id: F01
    name: 入力インターフェース
    description: ユーザーがプロジェクト名、議事録テキスト、希望スライド枚数、使用するシステムプロンプトを入力できるUIを提供する。
    details:
      - プロジェクト名入力欄 (テキスト)
      - 議事録テキスト入力欄 (テキストエリア)
      - スライド枚数指定 (数値入力またはスライダー、デフォルト値設定)
      - システムプロンプト選択 (ドロップダウンリスト、固定の選択肢またはカスタム入力)
      - ファイルアップロード機能はアーティファクトの制約上、今回は見送る (テキスト貼り付けのみ)。

  - id: F02
    name: テキスト分析 (簡易版)
    description: 入力された議事録テキストの文字数を表示する。アーティファクト内で完結するため、推定処理時間などの複雑な分析は見送る。
    details:
      - 文字数カウントと表示。

  - id: F03
    name: スライドコンテンツ生成
    description: 入力された情報と選択されたシステムプロンプトに基づき、Claude API (Messages API) を呼び出してスライドコンテンツ (JSON形式) を生成する。
    details:
      - アーティファクト内のJavaScriptからClaude APIを呼び出す。
      - APIキーはユーザーが設定画面等で入力・保持する方式を検討 (セキュリティに配慮が必要)。
      - プロンプトは現状のものをベースに、応答形式をJSONに限定する指示を強化。
      - 生成枚数はユーザー指定に従う。

  - id: F04
    name: 処理状況表示
    description: Claude API呼び出し中のローディング状態や、処理ステップを示すメッセージを表示する。SSEのようなリアルタイム更新は行わない。
    details:
      - API呼び出し中はスピナーや「生成中...」メッセージを表示。
      - 処理が完了したら結果表示エリアに切り替える。

  - id: F05
    name: 結果表示
    description: 生成されたスライドコンテンツ (JSON) を整形してアーティファクト内に表示する。ユーザーがコピーできるようにする。
    details:
      - JSONデータを分かりやすくフォーマットして表示 (例: `<pre>` タグ)。
      - 各スライドの内容（タイトル、カラム、スクリプト、画像プロンプト）を区別して表示。
      - 「結果をコピー」ボタンを設置。
      - SVGの直接レンダリングは今回は見送る (JSON内のSVGコード表示のみ)。

  - id: F06
    name: エラーハンドリング・表示
    description: API呼び出し時や処理中にエラーが発生した場合、ユーザーに分かりやすくエラーメッセージを表示する。
    details:
      - APIエラー、JSONパースエラーなどを捕捉し、エラーメッセージを表示。
      - エラー発生時に初期入力画面に戻るボタンを提供。

# --- ユーザーインターフェース (Artifact内) ---
ui:
  framework: HTML, CSS, JavaScript (Vanilla JS or lightweight library like Alpine.js)
  layout: シングルページ構成。入力フォーム、処理中表示、結果表示の各セクションを動的に切り替える。
  components:
    - InputForm: プロジェクト名、テキストエリア、枚数指定、プロンプト選択
    - AnalysisDisplay: 文字数表示
    - ProcessingIndicator: ローディングスピナー、メッセージ表示
    - ResultDisplay: 整形済みJSON表示、コピーボタン
    - ErrorDisplay: エラーメッセージ、戻るボタン
  styling: シンプルで見やすいデザイン。レスポンシブ対応は必須ではない。

# --- データフロー ---
data_flow:
  - step: 1
    actor: User
    action: フォームに情報を入力し、「生成開始」ボタンをクリック。
  - step: 2
    actor: Artifact (JS)
    action: 入力値を取得し、テキスト分析 (文字数カウント) を実行・表示。
  - step: 3
    actor: Artifact (JS)
    action: 処理中表示に切り替え。入力値とシステムプロンプトからClaude APIリクエストを構築。
  - step: 4
    actor: Artifact (JS)
    action: Claude API (Messages API) を呼び出す。
  - step: 5
    actor: Claude API
    action: プロンプトに基づきスライドコンテンツ (JSON) を生成して応答。
  - step: 6
    actor: Artifact (JS)
    action: API応答を受信。JSONをパース。
    error_handling: パース失敗時はエラー表示。
  - step: 7
    actor: Artifact (JS)
    action: 結果表示エリアに切り替え。整形済みJSONを表示。
  - step: 8
    actor: User
    action: 表示された結果を確認し、必要に応じてコピー。

# --- 技術スタック (Artifact内) ---
tech_stack:
  frontend: HTML5, CSS3, JavaScript (ES6+)
  api_client: Fetch API (for Claude API calls)

# --- 外部連携 ---
external_integrations:
  - service: Anthropic Claude API (Messages API)
    purpose: スライドコンテンツ生成
    authentication: API Key (ユーザー設定)

# --- 非機能要件 ---
non_functional_requirements:
  - id: NF01
    name: パフォーマンス
    description: API呼び出し以外のUI操作は軽快に行えること。API応答待ち時間は許容範囲内であること。
  - id: NF02
    name: エラーハンドリング
    description: APIエラーや予期せぬ応答が発生した場合でも、アーティファクトが停止せず、ユーザーに状況を通知すること。
  - id: NF03
    name: セキュリティ
    description: APIキーの取り扱いについて、ユーザーに注意喚起を行う (例: ブラウザストレージ利用のリスクなど)。

# --- スコープ外 ---
out_of_scope:
  - プロジェクト管理機能 (保存、一覧表示など)
  - データベース連携 (生成結果の永続化)
  - リアルタイム共同編集
  - SVGスライドの直接レンダリング・プレビュー
  - 複雑なテキスト分析 (推定時間など)
  - ファイルアップロードによる議事録入力
  - 動的なシステムプロンプト管理機能