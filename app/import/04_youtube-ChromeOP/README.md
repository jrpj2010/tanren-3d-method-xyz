# YouTube Data Extractor

YouTube動画のメタデータ、字幕、コメントを自動的に収集し、Markdownファイルとして保存するChrome拡張機能です。

## 機能

- **完全なデータ収集**: 動画タイトル、説明、チャンネル情報などのメタデータを取得
- **字幕抽出**: 利用可能な場合、動画の字幕を収集
- **自動コメント展開**: コメントセクションを自動的に展開して収集
- **AIによる分析（オプション）**: Google Gemini APIを使用して動画コンテンツの要約や分析を実行
- **Markdownファイル出力**: すべての収集データを整形されたMarkdownファイルとして保存

## インストール方法（開発者向け）

1. このリポジトリをクローンまたはダウンロードします
2. コマンドラインで以下を実行して依存関係をインストールします:
   ```
   npm install
   ```
3. アイコンを生成します:
   ```
   npm run generate-icons
   ```
4. Chrome拡張パッケージを作成します（オプション）:
   ```
   npm run build
   ```
5. Chromeで`chrome://extensions/`にアクセスします
6. 右上の「デベロッパーモード」を有効にします
7. 「パッケージ化されていない拡張機能を読み込む」をクリックします
8. このリポジトリのディレクトリを選択します

## 使用方法

1. YouTube動画ページを開きます
2. 拡張機能のポップアップアイコンをクリックします
3. 「データを収集」ボタンをクリックします
4. 収集が完了したら「ダウンロード」ボタンをクリックして、Markdownファイルを保存します

## 設定オプション

拡張機能のオプションページで以下の設定を変更できます:

1. **AI分析の有効化**: Google Gemini APIを使用して動画コンテンツの分析を有効または無効にします
2. **Gemini APIキー**: AI分析を使用する場合はAPIキーを入力します
3. **コメント返信の自動展開**: コメントの返信を自動的に展開するかどうかを設定します
4. **字幕の収集**: 利用可能な場合に字幕を収集するかどうかを設定します

## 出力

拡張機能は以下を含むMarkdownファイルを生成します:

- **メタデータ**: タイトル、チャンネル名、公開日、視聴回数、評価など
- **説明**: 動画の完全な説明（リンクは保持されます）
- **字幕**: 有効な場合、タイムスタンプ付きの完全な字幕
- **コメント**: ユーザー名、日付、いいね数を含むすべてのコメントと返信
- **AI分析結果**: 有効な場合、動画コンテンツの要約、主要ポイント、感情分析など

## 開発者向け情報

### プロジェクト構造

```
youtube-data-extractor/
├── manifest.json        - 拡張機能のマニフェスト
├── background.js        - バックグラウンドスクリプト
├── content.js           - YouTube動画ページでデータを収集するコンテンツスクリプト
├── popup.html           - ポップアップUI
├── popup.js             - ポップアップのロジック
├── options.html         - オプション設定ページ
├── options.js           - オプション設定のロジック
├── offscreen.html       - オフスクリーンドキュメント（Markdown生成用）
├── offscreen.js         - オフスクリーンロジック
├── icons/               - 拡張機能アイコン
│   ├── icon.svg         - ソースSVGアイコン
│   ├── create_icons.js  - PNGアイコン生成スクリプト
│   └── icon{16,48,128}.png - 各サイズのアイコン
├── build.js             - 拡張機能ZIPパッケージ作成スクリプト
└── package.json         - NPM設定とスクリプト
```

### スクリプト

- `npm run generate-icons` - SVGからPNGアイコンを生成
- `npm run build` - 拡張機能のZIPパッケージを作成

### 必要な依存関係

- Node.js
- NPM パッケージ:
  - canvas (アイコン生成用)
  - archiver (ZIPパッケージ作成用)

## 注意事項

- この拡張機能はYouTubeのウェブサイト構造に依存しているため、YouTubeの変更によって機能が影響を受ける可能性があります
- 大量のコメントセクションでは、完全な収集に時間がかかる場合があります
- この拡張機能を使用する際は、YouTubeの利用規約に従ってください

## ライセンス

MIT License 